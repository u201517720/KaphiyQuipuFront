<form class="needs-validation" [formGroup]="frmNotaIngresoPlantaDetalle" novalidate>
    <div class="form-row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="card mt-0">
                <h5 class="card-header bg-primary text-white text-center align-middle p-0 pt-1 pb-1">
                    NOTA DE INGRESO {{frmNotaIngresoPlantaDetalle.value.correlativo}}
                </h5>
                <div class="card-body">
                    <div class="form-row" *ngIf="locId > 0">
                        <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9"></div>
                        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                            <div class="form-group row">
                                <label for="destino" class="col-lg-5 col-form-label pr-0">FECHA REGISTRO</label>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">
                                    <label
                                        class="col-form-label">{{frmNotaIngresoPlantaDetalle.value.FechaRegistro}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row bg-primary align-middle mb-2 pt-1 pb-1">
                        <label class="text-white ml-1">DATOS GENERALES</label>
                    </div>
                    <div class="form-row">
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                            <div class="form-group row">
                                <label for="nroGuiaRemision" class="col-lg-4 col-form-label pr-0">N° GUÍA
                                    REMISIÓN</label>
                                <div class="col-lg-6 col-md-8 col-sm-8 col-xs-8">
                                    <input type="text" formControlName="nroGuiaRemision" [readonly]="locId > 0"
                                        [ngClass]="{ 'is-invalid': submitted && f.nroGuiaRemision.invalid, 'is-valid': !submitted && !f.nroGuiaRemision.invalid }"
                                        class="form-control form-control-sm"
                                        (keypress)="locId == 0 && BuscarGuiaRemision($event)">
                                </div>
                                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2" *ngIf="locId == 0">
                                    <button type="button" class="btn btn-sm btn-primary"
                                        (click)="ConsultarGuiaRemision()">Buscar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                            <div class="form-group row">
                                <label for="cliente" class="col-lg-2 col-form-label pr-0">CLIENTE</label>
                                <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
                                    <input type="text" formControlName="cliente" class="form-control form-control-sm"
                                        [readonly]="true">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                            <div class="form-group row">
                                <label for="direccion" class="col-lg-2 col-form-label">DIRECCIÓN</label>
                                <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
                                    <textarea type="text" formControlName="direccion"
                                        class="form-control form-control-sm" [readonly]="true"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                            <div class="form-group row">
                                <label for="certificacion" class="col-lg-4 col-form-label pr-0">CERTIFICACIÓN</label>
                                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                    <input type="text" formControlName="certificacion"
                                        class="form-control form-control-sm" [readonly]="true">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                            <div class="form-group row">
                                <label for="transportista" class="col-lg-4 col-form-label pr-0">TRANSPORTISTA</label>
                                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                    <input type="text" formControlName="transportista"
                                        class="form-control form-control-sm" [readonly]="true">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                            <div class="form-group row">
                                <label for="vehiculo" class="col-lg-4 col-form-label pr-0">VEHÍCULO</label>
                                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                    <input type="text" formControlName="vehiculo" class="form-control form-control-sm"
                                        [readonly]="true">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                            <div class="form-group row">
                                <label for="producto" class="col-lg-4 col-form-label pr-0">PRODUCTO</label>
                                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                    <input type="text" formControlName="producto" class="form-control form-control-sm"
                                        [readonly]="true">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                            <div class="form-group row">
                                <label for="numeroSacos" class="col-lg-4 col-form-label">N° SACOS</label>
                                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                    <input type="number" formControlName="numeroSacos"
                                        class="form-control form-control-sm text-right" [readonly]="true">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                            <div class="form-group row">
                                <label for="kilosBrutos" class="col-lg-4 col-form-label">KILOS BRUTOS</label>
                                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                    <input type="text" formControlName="kilosBrutos"
                                        class="form-control form-control-sm text-right" [readonly]="true">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                            <div class="form-group row">
                                <label for="tara" class="col-lg-4 col-form-label">TARA</label>
                                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                    <input type="text" formControlName="tara"
                                        class="form-control form-control-sm text-right" [readonly]="true">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                            <div class="form-group row">
                                <label for="kilosNetos" class="col-lg-4 col-form-label">KILOS NETOS</label>
                                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                    <input type="text" formControlName="kilosNetos"
                                        class="form-control form-control-sm text-right" [readonly]="true">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                            <div class="form-group row">
                                <label for="observaciones" class="col-lg-4 col-form-label">OBSERVACIONES</label>
                                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                    <textarea class="form-control form-control-sm" formControlName="observaciones"
                                        rows="2" placeholder="Observaciones" maxlength="500"
                                        [readonly]="locId > 0"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-row" *ngIf="locId > 0">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="card">
                <div class="card-content">
                    <div class="card-body">
                        <ul ngbNav #nav="ngbNav" [activeId]="1" [destroyOnHide]="false"
                            class="nav-pills justify-content-left">
                            <li [ngbNavItem]="1" [destroyOnHide]="true">
                                <a ngbNavLink class="nav-link d-flex align-items-center">
                                    <span class="d-none d-sm-block" style="font-size: 1.1rem;">Control de Calidad</span>
                                </a>
                                <ng-template ngbNavContent>
                                    <div class="row">
                                        <div
                                            class="col-lg-8 col-md-8 col-sm-12 col-xs-12 mb-2 border border-primary rounded-lg">
                                            <div class="row mb-2 mt-1">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <h4 class="text-center font-weight-bolder">ANÁLISIS FÍSICO</h4>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                    <table class="table table-sm">
                                                        <thead>
                                                            <th class="text-center">OLOR</th>
                                                            <th class="text-center">SELECCIÓN</th>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let olor of listOlores">
                                                                <td>
                                                                    <label>{{olor.Label}}</label>
                                                                </td>
                                                                <td class="text-center">
                                                                    <input type="checkbox" [disabled]="locEstado > 1"
                                                                        (change)="locEstado < 2 && changeOlores($event)"
                                                                        [value]="olor.Codigo"
                                                                        [checked]="oloresSeleccionados.includes(olor.Codigo)">
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                                    <table class="table table-sm">
                                                        <thead>
                                                            <th class="text-center">COLOR</th>
                                                            <th class="text-center">SELECCIÓN</th>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let color of listColores">
                                                                <td>
                                                                    <label for="">{{color.Label}}</label>
                                                                </td>
                                                                <td class="text-center">
                                                                    <input type="checkbox" [value]="color.Codigo"
                                                                        (change)="locEstado < 2 && changeColores($event)"
                                                                        [disabled]="locEstado > 1"
                                                                        [checked]="coloresSeleccionados.includes(color.Codigo)">
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-2 col-sm-1 col-xs-0">
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <h4 class="text-center font-weight-bolder">RENDIMIENTO EXPORTABLE
                                                    </h4>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <div class="table-responsive">
                                                        <table class="table table-borderless table-sm">
                                                            <thead>
                                                                <th class="text-center">Detalle</th>
                                                                <th class="text-center">Gramos</th>
                                                                <th class="text-center">%</th>
                                                            </thead>
                                                            <tbody>
                                                                <tr>
                                                                    <td>
                                                                        <h6>Café exportación</h6>
                                                                    </td>
                                                                    <td>
                                                                        <input type="number" [readonly]="locEstado > 1"
                                                                            formControlName="cafeExportacionGramos"
                                                                            (blur)="locEstado < 2 && CalcularAnalisisFisico()"
                                                                            [ngClass]="{ 'is-invalid': submitted && f.cafeExportacionGramos.invalid, 'is-valid': !submitted && !f.cafeExportacionGramos.invalid }"
                                                                            class="form-control text-right form-control-sm">
                                                                    </td>
                                                                    <td>
                                                                        <input type="number"
                                                                            formControlName="cafeExportacionPorc"
                                                                            [readonly]="true"
                                                                            class="form-control text-right form-control-sm">
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
                                                                        <h6>Descarte</h6>
                                                                    </td>
                                                                    <td>
                                                                        <input type="number" [readonly]="locEstado > 1"
                                                                            formControlName="descarteGramos"
                                                                            (blur)="locEstado < 2 && CalcularAnalisisFisico()"
                                                                            [ngClass]="{ 'is-invalid': submitted && f.descarteGramos.invalid, 'is-valid': !submitted && !f.descarteGramos.invalid }"
                                                                            class="form-control text-right form-control-sm">
                                                                    </td>
                                                                    <td>
                                                                        <input type="number"
                                                                            formControlName="descartePorcentaje"
                                                                            [readonly]="true"
                                                                            class="form-control text-right form-control-sm">
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
                                                                        <h6>Cáscara</h6>
                                                                    </td>
                                                                    <td>
                                                                        <input type="number" [readonly]="locEstado > 1"
                                                                            formControlName="cascaraGramos"
                                                                            (blur)="locEstado < 2 && CalcularAnalisisFisico()"
                                                                            [ngClass]="{ 'is-invalid': submitted && f.cascaraGramos.invalid, 'is-valid': !submitted && !f.cascaraGramos.invalid }"
                                                                            class="form-control text-right form-control-sm">
                                                                    </td>
                                                                    <td>
                                                                        <input type="number"
                                                                            formControlName="cascaraPorcentaje"
                                                                            [readonly]="true"
                                                                            class="form-control text-right form-control-sm">
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
                                                                        <h6>Total</h6>
                                                                    </td>
                                                                    <td>
                                                                        <input type="number"
                                                                            formControlName="totalGramos"
                                                                            class="form-control text-right form-control-sm"
                                                                            [readonly]="true">
                                                                    </td>
                                                                    <td>
                                                                        <input type="number"
                                                                            formControlName="totalPorcentaje"
                                                                            [readonly]="true"
                                                                            class="form-control text-right form-control-sm">
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <div class="form-group row">
                                                        <label for="humedadProcenPC"
                                                            class="col-lg-4 col-form-label">HUMEDAD (%)</label>
                                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                                            <input type="number" formControlName="humedadProcenPC"
                                                                [readonly]="locEstado > 1"
                                                                [ngClass]="{ 'is-invalid': submitted && f.humedadProcenPC.invalid, 'is-valid': !submitted && !f.humedadProcenPC.invalid }"
                                                                class="form-control text-right form-control-sm">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-3 col-md-2 col-sm-1 col-xs-0"></div>
                                        <div class="col-lg-6 col-md-8 col-sm-12 col-xs-12">
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <div class="form-group row">
                                                        <label for="observacionesAF"
                                                            class="col-lg-6 col-form-label font-weight-bold">RESPONSABLE
                                                            DEL CONTROL DE
                                                            CALIDAD</label>
                                                        <div class="col-lg-6">
                                                            <label
                                                                class="col-form-label">{{frmNotaIngresoPlantaDetalle.value.responsable}}</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-2 col-sm-1 col-xs-0"></div>
                                    </div>
                                </ng-template>
                            </li>
                            <li [ngbNavItem]="2" *ngIf="(userSession.RolId === 14 && locEstado == 6) || locEstado > 6">
                                <a ngbNavLink class="nav-link d-flex align-items-center">
                                    <span class="d-none d-sm-block" style="font-size: 1.1rem;">Resultados
                                        Transformación</span>
                                </a>
                                <ng-template ngbNavContent>
                                    <div class="row">
                                        <div class="col-lg-1"></div>
                                        <div class="col-lg-10 col-md-12 col-sm-12 col-xs-12 mb-2">
                                            <div class="table-responsive">
                                                <table class="table table-sm table-bordered table-striped table-hover">
                                                    <thead>
                                                        <tr class="bg-primary text-white">
                                                            <th colspan="7" class="text-center align-middle"
                                                                scope="colgroup">
                                                                Resultado de proceso</th>
                                                        </tr>
                                                        <tr class="bg-primary text-white">
                                                            <th scope="col" class="text-center align-middle">Item N°
                                                            </th>
                                                            <th scope="col" class="text-center align-middle">Producto
                                                            </th>
                                                            <th scope="col" class="text-center align-middle">Sacos
                                                                ({{frmNotaIngresoPlantaDetalle.value.pesoPorSaco}} Kg)
                                                            </th>
                                                            <th scope="col" class="text-center align-middle">Kilos</th>
                                                            <th scope="col" class="text-center align-middle">Kilos Netos
                                                            </th>
                                                            <th scope="col" class="text-center align-middle">QQS</th>
                                                            <th scope="col" class="text-center align-middle">%</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <th scope="row" class="text-center align-middle">1</th>
                                                            <td class="text-center align-middle">
                                                                <label>Café exportación</label>
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number" formControlName="cafeExportSacos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeExportSacos.invalid, 'is-valid': !submitted && !f.cafeExportSacos.invalid }"
                                                                    [readonly]="locEstado > 6"
                                                                    class="form-control form-control-sm text-right"
                                                                    (blur)="CalcularResultadosProcesos()">
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number" formControlName="cafeExportKilos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeExportKilos.invalid, 'is-valid': !submitted && !f.cafeExportKilos.invalid }"
                                                                    [readonly]="locEstado > 6"
                                                                    (blur)="CalcularResultadosProcesos()"
                                                                    class="form-control form-control-sm text-right">
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeExportKgNetos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeExportQQS}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeExportPorc}}</label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <th scope="row" class="text-center align-middle">2</th>
                                                            <td class="text-center align-middle">
                                                                <label>Café exportación MC</label>
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number" formControlName="cafeExportMCSacos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeExportMCSacos.invalid, 'is-valid': !submitted && !f.cafeExportMCSacos.invalid }"
                                                                    [readonly]="locEstado > 6"
                                                                    (blur)="CalcularResultadosProcesos()"
                                                                    class="form-control form-control-sm text-right">
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number" formControlName="cafeExportMCKilos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeExportMCKilos.invalid, 'is-valid': !submitted && !f.cafeExportMCKilos.invalid }"
                                                                    [readonly]="locEstado > 6"
                                                                    (blur)="CalcularResultadosProcesos()"
                                                                    class="form-control form-control-sm text-right">
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeExportMCKgNetos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeExportMCQQS}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeExportMCPorc}}</label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <th scope="row" class="text-center align-middle">3</th>
                                                            <td class="text-center align-middle">
                                                                <label>Café segunda</label>
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number" formControlName="cafeSegundaSacos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeSegundaSacos.invalid, 'is-valid': !submitted && !f.cafeSegundaSacos.invalid }"
                                                                    [readonly]="locEstado > 6"
                                                                    (blur)="CalcularResultadosProcesos()"
                                                                    class="form-control form-control-sm text-right">
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number" formControlName="cafeSegundaKilos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeSegundaKilos.invalid, 'is-valid': !submitted && !f.cafeSegundaKilos.invalid }"
                                                                    [readonly]="locEstado > 6"
                                                                    (blur)="CalcularResultadosProcesos()"
                                                                    class="form-control form-control-sm text-right">
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeSegundaKgNetos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeSegundaQQS}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeSegundaPorc}}</label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <th scope="row" class="text-center align-middle">4</th>
                                                            <td class="text-center align-middle">
                                                                <label>Café descarte máquina</label>
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number"
                                                                    formControlName="cafeDescarteMaquinaSacos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeDescarteMaquinaSacos.invalid, 'is-valid': !submitted && !f.cafeDescarteMaquinaSacos.invalid }"
                                                                    (blur)="CalcularResultadosProcesos()"
                                                                    [readonly]="locEstado > 6"
                                                                    class="form-control form-control-sm text-right">
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number"
                                                                    formControlName="cafeDescarteMaquinaKilos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeDescarteMaquinaKilos.invalid, 'is-valid': !submitted && !f.cafeDescarteMaquinaKilos.invalid }"
                                                                    (blur)="CalcularResultadosProcesos()"
                                                                    [readonly]="locEstado > 6"
                                                                    class="form-control form-control-sm text-right">
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeDescarteMaquinaKgNetos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeDescarteMaquinaQQS}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeDescarteMaquinaPorcen}}</label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <th scope="row" class="text-center align-middle">5</th>
                                                            <td class="text-center align-middle">
                                                                <label>Café descarte de escojo</label>
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number"
                                                                    formControlName="cafeDescarteEscojoSacos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeDescarteEscojoSacos.invalid, 'is-valid': !submitted && !f.cafeDescarteEscojoSacos.invalid }"
                                                                    (blur)="CalcularResultadosProcesos()"
                                                                    [readonly]="locEstado > 6"
                                                                    class="form-control form-control-sm text-right">
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number"
                                                                    formControlName="cafeDescarteEscojoKilos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeDescarteEscojoKilos.invalid, 'is-valid': !submitted && !f.cafeDescarteEscojoKilos.invalid }"
                                                                    (blur)="CalcularResultadosProcesos()"
                                                                    [readonly]="locEstado > 6"
                                                                    class="form-control form-control-sm text-right">
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeDescarteEscojoKgNetos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeDescarteEscojoQQS}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeDescarteEscojoPorcen}}</label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <th scope="row" class="text-center align-middle">6</th>
                                                            <td class="text-center align-middle">
                                                                <label>Café bola</label>
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number" formControlName="cafeBolaSacos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeBolaSacos.invalid, 'is-valid': !submitted && !f.cafeBolaSacos.invalid }"
                                                                    class="form-control form-control-sm text-right"
                                                                    [readonly]="locEstado > 6"
                                                                    (blur)="CalcularResultadosProcesos()">
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number" formControlName="cafeBolaKilos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeBolaKilos.invalid, 'is-valid': !submitted && !f.cafeBolaKilos.invalid }"
                                                                    class="form-control form-control-sm text-right"
                                                                    [readonly]="locEstado > 6"
                                                                    (blur)="CalcularResultadosProcesos()">
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeBolaKgNetos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeBolaQQS}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeBolaPorcen}}</label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <th scope="row" class="text-center align-middle">7</th>
                                                            <td class="text-center align-middle">
                                                                <label>Café cisco</label>
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number" formControlName="cafeCiscoSacos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeCiscoSacos.invalid, 'is-valid': !submitted && !f.cafeCiscoSacos.invalid }"
                                                                    class="form-control form-control-sm text-right"
                                                                    [readonly]="locEstado > 6"
                                                                    (blur)="CalcularResultadosProcesos()">
                                                            </td>
                                                            <td class="text-center">
                                                                <input type="number" formControlName="cafeCiscoKilos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.cafeCiscoKilos.invalid, 'is-valid': !submitted && !f.cafeCiscoKilos.invalid }"
                                                                    class="form-control form-control-sm text-right"
                                                                    [readonly]="locEstado > 6"
                                                                    (blur)="CalcularResultadosProcesos()">
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeCiscoKgNetos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeCiscoQQS}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cafeCiscoPorcen}}</label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <th scope="row" class="text-center align-middle">8</th>
                                                            <td class="text-center align-middle">
                                                                <label>TOTAL EN CAFÉ</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.totalCafeSacos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.totalCafeKilos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.totalCafeKgNetos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.totalCafeQQS}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.totalCafePorcen}}</label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <th scope="row" class="text-center align-middle">9</th>
                                                            <td class="text-center align-middle">
                                                                <label>Piedras y otros</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.piedrasOtrosSacos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.piedrasOtrosKilos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <input type="number"
                                                                    formControlName="piedrasOtrosKgNetos"
                                                                    [ngClass]="{ 'is-invalid': submitted && f.piedrasOtrosKgNetos.invalid, 'is-valid': !submitted && !f.piedrasOtrosKgNetos.invalid }"
                                                                    [readonly]="locEstado > 6"
                                                                    class="form-control form-control-sm text-right"
                                                                    (blur)="CalcularResultadosProcesos()">
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.piedrasOtrosQQS}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.piedrasOtrosPorcen}}</label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <th scope="row" class="text-center align-middle">10</th>
                                                            <td class="text-center align-middle">
                                                                <label>Cáscara y otros</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cascaraOtrosSacos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cascaraOtrosKilos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cascaraOtrosKgNetos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cascaraOtrosQQS}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label>{{frmNotaIngresoPlantaDetalle.value.cascaraOtrosPorcen}}</label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2" class="text-center align-middle">
                                                                <label class="font-weight-bold">TOTALES</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label
                                                                    class="font-weight-bold">{{frmNotaIngresoPlantaDetalle.value.totalesSacos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label
                                                                    class="font-weight-bold">{{frmNotaIngresoPlantaDetalle.value.totalesKilos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label
                                                                    class="font-weight-bold">{{frmNotaIngresoPlantaDetalle.value.totalesKgNetos}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label
                                                                    class="font-weight-bold">{{frmNotaIngresoPlantaDetalle.value.totalesQQS}}</label>
                                                            </td>
                                                            <td class="text-right align-middle">
                                                                <label
                                                                    class="font-weight-bold">{{frmNotaIngresoPlantaDetalle.value.totalesPorcen}}</label>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="col-lg-1"></div>
                                    </div>
                                </ng-template>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div [ngbNavOutlet]="nav"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card">
            <div class="card-footer">
                <div class="form-row">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <div class="form-group row m-0">
                            <div class="col-lg-12 text-right">
                                <button type="button" class="btn btn-primary mr-1" (click)="GenerarGuiaSalida()"
                                    *ngIf="userSession.RolId == 11 && locEstado === 8">Generar Guía Salida</button>
                                <button type="button" class="btn btn-primary mr-1" (click)="FinalizarTransformacion()"
                                    *ngIf="userSession.RolId == 14 && locEstado === 7">Finalizar Transformación</button>
                                <button type="button" class="btn btn-primary mr-1" (click)="AutorizarTransformacion()"
                                    *ngIf="userSession.RolId == 11 && locEstado === 4">Autorizar Transformación</button>
                                <button type="button" class="btn btn-primary mr-1" (click)="FinalizarEtiquetado()"
                                    *ngIf="userSession.RolId == 13 && locEstado === 3">Finalizar Etiquetado</button>
                                <button type="button" class="btn btn-primary mr-1" (click)="ImprimirEtiquetas()"
                                    *ngIf="userSession.RolId == 13 && locEstado === 3">Imprimir Etiquetas</button>
                                <button type="button" class="btn btn-primary mr-1" (click)="ConfirmarRecepcion()"
                                    *ngIf="userSession.RolId == 13 && locEstado === 2">Confirmar Recepción</button>
                                <button type="button" class="btn btn-primary mr-1" (click)="Guardar()"
                                    *ngIf="(userSession.RolId == 12 || userSession.RolId == 11 || userSession.RolId == 14) && (locEstado < 2 || locEstado == 6)">Guardar</button>
                                <button type="button" class="btn btn-danger" (click)="Cancelar()">Cancelar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="d-flex justify-content-between align-items-center">
    <ngx-spinner></ngx-spinner>
</div>